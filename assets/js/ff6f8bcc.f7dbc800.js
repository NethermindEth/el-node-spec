"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[608],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>k});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var m=r.createContext({}),p=function(e){var t=r.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=p(e.components);return r.createElement(m.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,m=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),c=p(n),u=a,k=c["".concat(m,".").concat(u)]||c[u]||d[u]||i;return n?r.createElement(k,l(l({ref:t},s),{},{components:n})):r.createElement(k,l({ref:t},s))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=u;var o={};for(var m in t)hasOwnProperty.call(t,m)&&(o[m]=t[m]);o.originalType=e,o[c]="string"==typeof e?e:a,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6605:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const i={sidebar_position:1,id:"metrics-prom-spec"},l="Prometheus Metrics Specification",o={unversionedId:"spec/metrics/metrics-prom-spec",id:"spec/metrics/metrics-prom-spec",title:"Prometheus Metrics Specification",description:"The table below defines metrics which may be captured by AVS Nodes which expose metrics to Prometheus. AVSs may expose additional metrics however these should not use the eigen_ prefix.",source:"@site/docs/spec/metrics/metrics-prom.md",sourceDirName:"spec/metrics",slug:"/spec/metrics/metrics-prom-spec",permalink:"/docs/spec/metrics/metrics-prom-spec",draft:!1,editUrl:"https://github.com/NethermindEth/el-node-spec/edit/main/docs/docs/spec/metrics/metrics-prom.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,id:"metrics-prom-spec"},sidebar:"sidebar",previous:{title:"Metrics",permalink:"/docs/category/metrics"},next:{title:"Implementation reference",permalink:"/docs/spec/metrics/metrics-examples"}},m={},p=[{value:"Economics metrics",id:"economics-metrics",level:2},{value:"Performance metrics",id:"performance-metrics",level:2},{value:"RPC metrics",id:"rpc-metrics",level:2},{value:"Notation examples",id:"notation-examples",level:2}],s={toc:p},c="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"prometheus-metrics-specification"},"Prometheus Metrics Specification"),(0,a.kt)("p",null,"The table below defines metrics which may be captured by AVS Nodes which expose metrics to Prometheus. AVSs may expose additional metrics however these should not use the ",(0,a.kt)("inlineCode",{parentName:"p"},"eigen_")," prefix. "),(0,a.kt)("h2",{id:"economics-metrics"},"Economics metrics"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Metric Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Definition"),(0,a.kt)("th",{parentName:"tr",align:null},"Labels"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"eigen_fees_earned_total")),(0,a.kt)("td",{parentName:"tr",align:null},"Counter"),(0,a.kt)("td",{parentName:"tr",align:null},"The amount of fees earned in ",(0,a.kt)("inlineCode",{parentName:"td"},"<unit>")," of underlying ",(0,a.kt)("inlineCode",{parentName:"td"},"<token>")," in the ",(0,a.kt)("inlineCode",{parentName:"td"},"<strategy>")," contract. This metric ",(0,a.kt)("strong",{parentName:"td"},"SHOULD")," be omitted while fees are yet to be implemented."),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"token"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"unit"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"strategy"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"eigen_slashing_status")),(0,a.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,a.kt)("td",{parentName:"tr",align:null},"Slashing status. The value ",(0,a.kt)("strong",{parentName:"td"},"MUST")," be 1 if the operator running ",(0,a.kt)("inlineCode",{parentName:"td"},"avs")," has been slashed. This metric ",(0,a.kt)("strong",{parentName:"td"},"SHOULD")," not be implemented if there is no slashing in the target network (like in the upcoming testnet launch)."),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"avs"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"eigen_registered_stakes")),(0,a.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,a.kt)("td",{parentName:"tr",align:null},"Operator stakes in AVS registry contract. Most commonly represents a weighted combination of delegated shares in the ",(0,a.kt)("inlineCode",{parentName:"td"},"DelegationManager")," Eigenlayer contract."),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"quorum_number"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"quorum_name"))))),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"A definition of a strategy contract can be found in the ",(0,a.kt)("a",{parentName:"p",href:"/docs/glossary#strategy-contract"},"Glossary"),".")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"quorum_name")," label of the ",(0,a.kt)("inlineCode",{parentName:"p"},"eigen_registered_stakes")," metric is optional and can be omitted.")),(0,a.kt)("h2",{id:"performance-metrics"},"Performance metrics"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Metric Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Definition"),(0,a.kt)("th",{parentName:"tr",align:null},"Labels"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"eigen_performance_score")),(0,a.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,a.kt)("td",{parentName:"tr",align:null},"The performance metric is a score between 0 and 100 and each developer can define their own way of calculating the score. The score is calculated based on the performance of the AVS Node and the performance of the backing  services."),(0,a.kt)("td",{parentName:"tr",align:null})))),(0,a.kt)("h2",{id:"rpc-metrics"},"RPC metrics"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Metric Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Definition"),(0,a.kt)("th",{parentName:"tr",align:null},"Labels"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"eigen_rpc_request_duration_seconds")),(0,a.kt)("td",{parentName:"tr",align:null},"Histogram"),(0,a.kt)("td",{parentName:"tr",align:null},"Duration of json-rpc ",(0,a.kt)("inlineCode",{parentName:"td"},"<method>")," in seconds from Ethereum Execution client ",(0,a.kt)("inlineCode",{parentName:"td"},"<client>")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"method"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"client_version"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"eigen_rpc_request_total")),(0,a.kt)("td",{parentName:"tr",align:null},"Counter"),(0,a.kt)("td",{parentName:"tr",align:null},"Total of json-rpc ",(0,a.kt)("inlineCode",{parentName:"td"},"<method>")," requests from Ethereum Execution client ",(0,a.kt)("inlineCode",{parentName:"td"},"<client>")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"method"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"client_version"))))),(0,a.kt)("h2",{id:"notation-examples"},"Notation examples"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'eigen_fees_earned_total{token="rETH", unit="gwei", strategy="0x1BeE69b7dFFfA4E2d53C2a2Df135C388AD25dCD2"}')),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'eigen_slashing_status{avs="eigenDA}')),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'eigen_registered_stakes{quorum_number=0, quorum_name="ethLST"}')),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"eigen_performance_score{}")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'eigen_rpc_request_duration_seconds{method="eth_getBlockByNumber", client_version="nethermind/v1.17.2"}')),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'eigen_rpc_request_total{method="eth_getBlockByNumber", client_version="nethermind/v1.17.2"}'))))}d.isMDXComponent=!0}}]);