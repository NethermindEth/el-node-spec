---
sidebar_position: 1 
id: metrics-api
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';


# EigenLayr Middleware API 

The EigenLayr Middleware API provides monitoring and common metrics for middleware services designed for the EigenLayr protocol.

## Base URL

The base URL for the API is:

```
/eigen/v1
```

## Middleware

Endpoints to query middleware related information.

### GET /eigen/v1/middleware/version

Provides middleware service identity information in a format similar to [HTTP User-Agent](https://www.rfc-editor.org/rfc/rfc7231#section-5.5.3)

#### Parameters

No parameters

#### Responses

**200** - Request successful

**Content-Type:** `application/json`

<Tabs>
  <TabItem value="example" label="Example Value" default>

  ```json
  {
    "version": "EigenLayer-Middleware/v1.0.0"
  }
  ```

  </TabItem>
  <TabItem value="schema" label="Schema">

  ```json
  {
    "type": "object",
    "properties": {
      "version": {
        "type": "string",
        "description": "Middleware service version"
      }
    },
    "required": [
      "version"
    ]
  }
  ```

  </TabItem>
</Tabs>

**500** - Internal server error

**Content-Type:** `application/json`

<Tabs>
  <TabItem value="example" label="Example Value" default>

  ```json
  {
    "message": "Internal server error"
  }
  ```

  </TabItem>
  <TabItem value="schema" label="Schema">

  ```json
  {
    "type": "object",
    "properties": {
      "message": {
        "type": "string",
        "description": "Error message"
      }
    },
    "required": [
      "message"
    ]
  }
  ```

  </TabItem>
</Tabs>

### GET /eigen/v1/middleware/health

Returns middleware service health status in HTTP status codes.

#### Parameters

No parameters

#### Responses

**200** - Middleware service is healthy

**206** - Middleware service is partially healthy. It is either initializing or some backing services are not healthy.

**503** - Middleware service is unhealthy or having issues.

### GET /eigen/v1/middleware/services

Returns a list of all backing services that are currently registered with the middleware service setup. Useful to determine if a service is currently registered with the middleware service and to get the service ID for health endpoint.

#### Parameters

No parameters

#### Responses

**200** - Request successful

**Content-Type:** `application/json`

<Tabs>
  <TabItem value="example" label="Example Value" default>

  ```json
  {
    "services": [
      {
        "id": "db-1",
        "name": "Database",
        "description": "Database description",
        "status": "Up",
      },
      {
        "id": "idx-2",
        "name": "Indexer",
        "description": "Indexer description",
        "status": "Down",
      }
    ]
  }
  ```

  </TabItem>
  <TabItem value="schema" label="Schema">

  ```json
  {
    "type": "object",
    "properties": {
      "services": {
        "type": "array",
        "description": "List of backing services",
        "items": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "Service ID"
            },
            "name": {
              "type": "string",
              "description": "Service name"
            },
            "description": {
              "type": "string",
              "description": "Service description"
            },
            "status": {
              "type": "string",
              "description": "Service status. Possible values are Up, Down, or Initializing."

            }
          },
          "required": [
            "id",
            "name",
            "description"
          ]
        }
      }
    },
    "required": [
      "services"
    ]
  }
  ```

  </TabItem>
</Tabs>

**500** - Internal server error

**Content-Type:** `application/json`

<Tabs>
  <TabItem value="example" label="Example Value" default>

  ```json
  {
    "message": "Internal server error"
  }
  ```

  </TabItem>
  <TabItem value="schema" label="Schema">

  ```json
  {
    "type": "object",
    "properties": {
      "message": {
        "type": "string",
        "description": "Error message"
      }
    },
    "required": [
      "message"
    ]
  }
  ```

  </TabItem>
</Tabs>

### GET /eigen/v1/middleware/services/{service_ID}/health

Returns the health status of the given service in HTTP status codes. The service ID is the service ID returned by the /eigen/v1/services endpoint. The service is considered healthy if the service is registered with the middleware service and the service is currently online.

#### Parameters

**service_ID** `string` `(path)` - Service ID

#### Responses

**200** - Backing service is healthy

**206** - Backing service is partially healthy. It is either initializing or not ready yet.

**503** - Backing service is unhealthy or having issues.
